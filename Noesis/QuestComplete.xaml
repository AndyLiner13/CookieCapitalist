<!--
  QuestComplete - Achievement/Quest completion banner (Screen Overlay)
  Display Mode: Screen Overlay, Render Order: 15 (above header, below footer)
  Input Mode: Interactive, nonblocking
  
  Shows as a banner below the header when player completes a quest/achievement.
  
  DataContext bindings:
  - isVisible: Show/hide banner
  - questName: Achievement title (e.g., "Cookie Millionaire")
  - questEmoji: Large emoji/icon (e.g., "ðŸ’°")
  - rewardMessage: Reward display text (e.g., "+10,000 Cookies!")
  - onDismiss: Tap to dismiss banner
-->

<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
  d:DesignWidth="393"
  d:DesignHeight="852">

  <Page.Resources>
    <ResourceDictionary>
      <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </ResourceDictionary>
  </Page.Resources>

  <!-- Main container -->
  <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="{x:Null}">
    
    <!-- Banner positioned below header (top 28% is header space) -->
    <Grid Visibility="{Binding isVisible, Converter={StaticResource BoolToVis}}"
          VerticalAlignment="Top"
          Margin="0,240,0,0">
      
      <!-- Tap to dismiss button -->
      <Button Command="{Binding onDismiss}"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Top"
              HorizontalContentAlignment="Stretch"
              VerticalContentAlignment="Top">
        <Button.Template>
          <ControlTemplate TargetType="Button">
            <Border x:Name="BannerContainer"
                    CornerRadius="14"
                    Margin="12,0"
                    HorizontalAlignment="Stretch"
                    RenderTransformOrigin="0.5,0">
              <Border.RenderTransform>
                <TranslateTransform x:Name="BannerTranslate" Y="-100"/>
              </Border.RenderTransform>
              <Border.Background>
                <SolidColorBrush Color="#F2F2F7" Opacity="0.92"/>
              </Border.Background>
              <Border.Effect>
                <DropShadowEffect Color="#000000" BlurRadius="20" ShadowDepth="0" Opacity="0.15"/>
              </Border.Effect>
              
              <!-- Entrance animation -->
              <Border.Triggers>
                <EventTrigger RoutedEvent="Border.Loaded">
                  <BeginStoryboard>
                    <Storyboard>
                      <!-- Slide down -->
                      <DoubleAnimation Storyboard.TargetName="BannerTranslate"
                                       Storyboard.TargetProperty="Y"
                                       From="-100" To="0" Duration="0:0:0.5">
                        <DoubleAnimation.EasingFunction>
                          <CubicEase EasingMode="EaseOut"/>
                        </DoubleAnimation.EasingFunction>
                      </DoubleAnimation>
                    </Storyboard>
                  </BeginStoryboard>
                </EventTrigger>
              </Border.Triggers>
              
              <!-- Content -->
              <Grid Margin="16,14,16,14">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto"/>
                  <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Icon circle background -->
                <Border Grid.Column="0" Width="40" Height="40" CornerRadius="20" 
                        Margin="0,0,12,0" VerticalAlignment="Center"
                        Background="#FFD700"/>
                
                <!-- Emoji icon -->
                <Viewbox Grid.Column="0" Width="28" Height="28" Margin="0,0,12,0" VerticalAlignment="Center">
                  <TextBlock TextAlignment="Center">
                    <Run Text="{Binding questEmoji}" FontSize="28"/>
                  </TextBlock>
                </Viewbox>
                
                <!-- Text content -->
                <StackPanel Grid.Column="1" Orientation="Vertical" VerticalAlignment="Center">
                  <!-- App name / category -->
                  <TextBlock TextAlignment="Left" Margin="0,0,0,2">
                    <Run Text="QUEST " FontFamily="Fonts/#Anton-Regular" FontSize="13" Foreground="#000000" />
                    <Run Text="COMPLETE" FontFamily="Fonts/#Anton-Regular" FontSize="13" Foreground="#FFD700" />
                  </TextBlock>
                  
                  <!-- Quest name -->
                  <TextBlock TextAlignment="Left" TextWrapping="Wrap" Margin="0,0,0,2">
                    <Run Text="{Binding questName}" FontFamily="Fonts/#Anton-Regular" FontSize="16" Foreground="#000000"/>
                  </TextBlock>
                  
                  <!-- Reward message -->
                  <TextBlock TextAlignment="Left" Opacity="0.7">
                    <Run Text="{Binding rewardMessage}" FontFamily="Fonts/#Anton-Regular" FontSize="14" Foreground="#000000"/>
                  </TextBlock>
                </StackPanel>
              </Grid>
            </Border>
          </ControlTemplate>
        </Button.Template>
      </Button>
    </Grid>
  </Grid>
</Page>
