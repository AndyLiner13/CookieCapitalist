<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
  d:DesignWidth="393"
  d:DesignHeight="852">

  <Page.Resources>
    <ResourceDictionary>
      <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </ResourceDictionary>
  </Page.Resources>

  <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    
    <Grid Visibility="{Binding isVisible, Converter={StaticResource BoolToVis}}">
      <Grid.Background>
        <SolidColorBrush Color="#CC000000"/>
      </Grid.Background>
      
      <Border
        CornerRadius="16"
        Padding="32,40"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        MaxWidth="380"
        MinWidth="280">
        <Border.Background>
          <SolidColorBrush Color="#FF000000" Opacity="0.985"/>
        </Border.Background>
        
        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
          
          <Viewbox MaxHeight="60" Stretch="Uniform" HorizontalAlignment="Center" Margin="0,0,0,24">
            <TextBlock Text="Welcome Back!"
                       FontFamily="Fonts/#Bangers-Regular"
                       FontSize="48"
                       Foreground="#ffffff"
                       TextAlignment="Center"/>
          </Viewbox>
          
          <Viewbox MaxHeight="36" Stretch="Uniform" HorizontalAlignment="Center" Margin="0,0,0,8">
            <TextBlock Text="While you were away for"
                       FontFamily="Fonts/#Anton-Regular"
                       FontSize="24"
                       Foreground="#ffffff"
                       TextAlignment="Center"/>
          </Viewbox>
          
          <Viewbox MaxHeight="56" Stretch="Uniform" HorizontalAlignment="Center" Margin="0,0,0,32">
            <TextBlock Text="{Binding timeAway}"
                       FontFamily="Fonts/#Anton-Regular"
                       FontSize="48"
                       Foreground="#FFD700"
                       TextAlignment="Center"/>
          </Viewbox>
          
          <Viewbox MaxHeight="36" Stretch="Uniform" HorizontalAlignment="Center" Margin="0,0,0,8">
            <TextBlock Text="You earned"
                       FontFamily="Fonts/#Anton-Regular"
                       FontSize="24"
                       Foreground="#ffffff"
                       TextAlignment="Center"/>
          </Viewbox>
          
          <Viewbox MaxHeight="64" Stretch="Uniform" HorizontalAlignment="Center" Margin="24,0,24,40">
            <TextBlock Text="{Binding cookiesEarned}"
                       FontFamily="Fonts/#Bangers-Regular"
                       FontSize="56"
                       Foreground="#FFD700"
                       TextAlignment="Center"
                       HorizontalAlignment="Center">
              <TextBlock.Effect>
                <DropShadowEffect Color="#000000" BlurRadius="4" ShadowDepth="0" Opacity="0.8"/>
              </TextBlock.Effect>
            </TextBlock>
          </Viewbox>
          
          <Button Command="{Binding onCollect}"
                  HorizontalAlignment="Center"
                  RenderTransformOrigin="0.5,0.5">
            <Button.RenderTransform>
              <ScaleTransform x:Name="CollectButtonScale" ScaleX="1" ScaleY="1"/>
            </Button.RenderTransform>
            <b:Interaction.Triggers>
              <b:EventTrigger EventName="PreviewMouseLeftButtonDown">
                <b:ControlStoryboardAction>
                  <b:ControlStoryboardAction.Storyboard>
                    <Storyboard>
                      <DoubleAnimation Storyboard.TargetName="CollectButtonScale"
                                       Storyboard.TargetProperty="ScaleX"
                                       To="0.9" Duration="0:0:0.05"/>
                      <DoubleAnimation Storyboard.TargetName="CollectButtonScale"
                                       Storyboard.TargetProperty="ScaleY"
                                       To="0.9" Duration="0:0:0.05"/>
                    </Storyboard>
                  </b:ControlStoryboardAction.Storyboard>
                </b:ControlStoryboardAction>
              </b:EventTrigger>
              <b:EventTrigger EventName="PreviewMouseLeftButtonUp">
                <b:ControlStoryboardAction>
                  <b:ControlStoryboardAction.Storyboard>
                    <Storyboard>
                      <DoubleAnimation Storyboard.TargetName="CollectButtonScale"
                                       Storyboard.TargetProperty="ScaleX"
                                       To="1" Duration="0:0:0.15">
                        <DoubleAnimation.EasingFunction>
                          <QuadraticEase EasingMode="EaseOut"/>
                        </DoubleAnimation.EasingFunction>
                      </DoubleAnimation>
                      <DoubleAnimation Storyboard.TargetName="CollectButtonScale"
                                       Storyboard.TargetProperty="ScaleY"
                                       To="1" Duration="0:0:0.15">
                        <DoubleAnimation.EasingFunction>
                          <QuadraticEase EasingMode="EaseOut"/>
                        </DoubleAnimation.EasingFunction>
                      </DoubleAnimation>
                    </Storyboard>
                  </b:ControlStoryboardAction.Storyboard>
                </b:ControlStoryboardAction>
              </b:EventTrigger>
            </b:Interaction.Triggers>
            <Button.Template>
              <ControlTemplate TargetType="Button">
                <Border Background="#fa9750" 
                        CornerRadius="12"
                        Padding="48,16">
                  <Viewbox MaxHeight="36" Stretch="Uniform">
                    <TextBlock Text="Collect"
                              FontFamily="Fonts/#Anton-Regular"
                              FontSize="28"
                              Foreground="#ffffff"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                  </Viewbox>
                </Border>
              </ControlTemplate>
            </Button.Template>
          </Button>
          
        </StackPanel>
        
      </Border>
      
    </Grid>
    
  </Grid>
  
</Page>
