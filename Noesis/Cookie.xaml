<!-- 
  Cookie - Clickable cookie button with popups (Screen Overlay)
  Display Mode: Screen Overlay, Render Order: 5 (same as Shop/Leaderboard)
  Input Mode: Interactive, nonblocking
  Visibility controlled by TypeScript based on current page (home)
-->

<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
  d:DataContext="Cookie_DataSet"
  d:DesignWidth="393"
  d:DesignHeight="852">

<Page.Resources>
  <ResourceDictionary>
    <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    
    <!-- Popup text style -->
    <Style x:Key="PopupTextStyle" TargetType="TextBlock">
      <Setter Property="FontFamily" Value="Fonts/#Anton"/>
      <Setter Property="HorizontalAlignment" Value="Center"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
      <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
      <Setter Property="IsHitTestVisible" Value="False"/>
    </Style>
  </ResourceDictionary>
</Page.Resources>

<Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
      Visibility="{Binding isVisible, Converter={StaticResource BoolToVis}}">
  
  <!-- Clickable Cookie (centered) -->
  <Button x:Name="CookieButton"
          Command="{Binding onCookieClick}"
          Width="256"
          Height="256"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          RenderTransformOrigin="0.5,0.5"
          Background="Transparent"
          BorderThickness="0"
          BorderBrush="Transparent"
          Padding="0">
    <Button.Template>
      <ControlTemplate TargetType="Button">
        <Border Background="Transparent">
          <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
        </Border>
      </ControlTemplate>
    </Button.Template>
    <Button.RenderTransform>
      <ScaleTransform x:Name="CookieScale" ScaleX="1" ScaleY="1"/>
    </Button.RenderTransform>
    
    <!-- Button click animations using mouse events -->
    <b:Interaction.Triggers>
      <b:EventTrigger EventName="PreviewMouseLeftButtonDown">
        <b:ControlStoryboardAction>
          <b:ControlStoryboardAction.Storyboard>
            <Storyboard>
              <DoubleAnimation Storyboard.TargetName="CookieScale" Storyboard.TargetProperty="ScaleX" To="0.9" Duration="0:0:0.05"/>
              <DoubleAnimation Storyboard.TargetName="CookieScale" Storyboard.TargetProperty="ScaleY" To="0.9" Duration="0:0:0.05"/>
            </Storyboard>
          </b:ControlStoryboardAction.Storyboard>
        </b:ControlStoryboardAction>
      </b:EventTrigger>
      <b:EventTrigger EventName="PreviewMouseLeftButtonUp">
        <b:ControlStoryboardAction>
          <b:ControlStoryboardAction.Storyboard>
            <Storyboard>
              <DoubleAnimation Storyboard.TargetName="CookieScale" Storyboard.TargetProperty="ScaleX" To="1" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                  <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
              </DoubleAnimation>
              <DoubleAnimation Storyboard.TargetName="CookieScale" Storyboard.TargetProperty="ScaleY" To="1" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                  <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
              </DoubleAnimation>
            </Storyboard>
          </b:ControlStoryboardAction.Storyboard>
        </b:ControlStoryboardAction>
      </b:EventTrigger>
    </b:Interaction.Triggers>
    
    <Grid>
      <Image Source="Images/Coogie.png" Width="256" Height="256" Stretch="UniformToFill"/>
    </Grid>
  </Button>
  
  <!-- Popup Text Elements (10 total) - positioned around cookie center -->
  <TextBlock x:Name="Popup0" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup0Text}" Visibility="{Binding Popup0Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup0Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup0Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup0Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup0Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup0" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup1" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup1Text}" Visibility="{Binding Popup1Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup1Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup1Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup1Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup1Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup1" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup2" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup2Text}" Visibility="{Binding Popup2Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup2Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup2Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup2Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup2Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup2" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup3" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup3Text}" Visibility="{Binding Popup3Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup3Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup3Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup3Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup3Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup3" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup4" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup4Text}" Visibility="{Binding Popup4Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup4Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup4Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup4Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup4Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup4" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup5" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup5Text}" Visibility="{Binding Popup5Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup5Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup5Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup5Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup5Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup5" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup6" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup6Text}" Visibility="{Binding Popup6Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup6Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup6Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup6Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup6Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup6" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup7" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup7Text}" Visibility="{Binding Popup7Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup7Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup7Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup7Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup7Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup7" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup8" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup8Text}" Visibility="{Binding Popup8Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup8Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup8Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup8Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup8Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup8" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>
  <TextBlock x:Name="Popup9" Style="{StaticResource PopupTextStyle}" Text="{Binding Popup9Text}" Visibility="{Binding Popup9Visible, Converter={StaticResource BoolToVis}}" Margin="{Binding Popup9Margin}" FontSize="{Binding PopupFontSize}" Foreground="{Binding PopupColor}">
    <TextBlock.RenderTransform><TransformGroup><TranslateTransform x:Name="Popup9Translate" Y="0"/><ScaleTransform ScaleX="1" ScaleY="1"/></TransformGroup></TextBlock.RenderTransform>
    <b:Interaction.Triggers><b:DataTrigger Binding="{Binding Popup9Animate}" Value="True"><b:ControlStoryboardAction><b:ControlStoryboardAction.Storyboard><Storyboard><DoubleAnimation Storyboard.TargetName="Popup9Translate" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:0.6"><DoubleAnimation.EasingFunction><QuadraticEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction></DoubleAnimation><DoubleAnimation Storyboard.TargetName="Popup9" Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.6"/></Storyboard></b:ControlStoryboardAction.Storyboard></b:ControlStoryboardAction></b:DataTrigger></b:Interaction.Triggers>
  </TextBlock>

</Grid>
</Page>
